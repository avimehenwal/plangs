(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{530:function(t,s,a){t.exports=a.p+"assets/img/web-sockets.b7a627d6.png"},531:function(t,s,a){t.exports=a.p+"assets/img/ws-workarounds.2c49d687.png"},623:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"web-socket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-socket"}},[t._v("#")]),t._v(" Web Socket")]),t._v(" "),e("TagLinks"),t._v(" "),e("p",[t._v("How to write Web Socket API client (included with browsers) and server?")]),t._v(" "),e("ul",[e("li",[t._v("IETF RFC-6455")]),t._v(" "),e("li",[t._v("Low overhead <1% HTTP, low latency")]),t._v(" "),e("li",[t._v("open TCP under HTTP, SSL/TLS security")]),t._v(" "),e("li",[t._v("Full Duplex Communication RT communication protocol "),e("mark",[t._v("over single TCP Connection")])]),t._v(" "),e("li",[t._v("Used for delivery of dynamic data, doesnt replace HTTP")]),t._v(" "),e("li",[t._v("HTTP Upgrade request, do you spek web-socket? then Handshake")]),t._v(" "),e("li",[t._v("Web socket protocol supports "),e("strong",[t._v("text")]),t._v(" and "),e("strong",[t._v("binary data")]),t._v(". In terms of Javascript, text refers to as a string, while binary data is represented like ArrayBuffer.")])]),t._v(" "),e("blockquote",[e("p",[t._v("Just messaging to servers from IoT")])]),t._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"Why use web sockets","data-src":a(530),loading:"lazy"}})]),t._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"Workarounds to web socket","data-src":a(531),loading:"lazy"}})]),t._v(" "),e("h2",{attrs:{id:"web-socket-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-socket-server"}},[t._v("#")]),t._v(" web socket server")]),t._v(" "),e("ul",[e("li",[t._v("express app using "),e("code",[t._v("ws")]),t._v(" package")]),t._v(" "),e("li",[t._v("What to do when client connects?")]),t._v(" "),e("li",[t._v("What to send?")]),t._v(" "),e("li",[t._v("What to do when recieves a message from client?")])]),t._v(" "),e("h2",{attrs:{id:"web-socket-client-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-socket-client-api"}},[t._v("#")]),t._v(" web socket client API")]),t._v(" "),e("ul",[e("li",[t._v("Connection events "),e("code",[t._v("open")]),t._v(", "),e("code",[t._v("message")]),t._v(", "),e("code",[t._v("close")]),t._v(", "),e("code",[t._v("send")])])]),t._v(" "),e("blockquote",[e("p",[t._v("WebSockets as REST APIs")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  wsc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocket")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ws://localhost:8080"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  wsc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onopen")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wsc opened "')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  wsc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclose")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wsc closed "')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  wsc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("message")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recieved "')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    wsc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h2",{attrs:{id:"use-clases"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#use-clases"}},[t._v("#")]),t._v(" Use clases")]),t._v(" "),e("blockquote",[e("p",[t._v("Simulate Real Time, Polling and Long Polling")])]),t._v(" "),e("ul",[e("li",[t._v("Brodcast messages to all clients, group chat")]),t._v(" "),e("li",[t._v("IoT type use cases")]),t._v(" "),e("li",[t._v("exxchange, trading applications")]),t._v(" "),e("li",[t._v("Replay things, transactions")]),t._v(" "),e("li",[t._v("Chat apps "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/XMPP",target:"_blank",rel:"noopener noreferrer"}},[t._v("XMPP"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("Multiplayer Games, Collaborative Apps, Developer Tools, Location dependent apps")]),t._v(" "),e("li",[t._v("Currency Exchanges")])]),t._v(" "),e("h2",{attrs:{id:"issues"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#issues"}},[t._v("#")]),t._v(" Issues")]),t._v(" "),e("ul",[e("li",[t._v("They're unreliable & "),e("strong",[t._v("hard to scale")])]),t._v(" "),e("li",[t._v("the connection might drop, and you might find yourself doing polling for the sake of reliability...")])]),t._v(" "),e("h2",{attrs:{id:"questions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#questions"}},[t._v("#")]),t._v(" questions")]),t._v(" "),e("ul",[e("li",[t._v("How well does WS scale? #people making || connections? HTTP is probably behind LB")]),t._v(" "),e("li",[t._v("How reselient is it to connection drops?")]),t._v(" "),e("li",[t._v("Does regular browser security constraints apply? like CORS?")]),t._v(" "),e("li",[t._v("Can data be compressed (gzip) through WS?")]),t._v(" "),e("li",[t._v("Can send bytes? plain text? yes => watch it in Wireshark")]),t._v(" "),e("li",[t._v("How to uniquely identify each client?")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://stackoverflow.com/questions/21386318/storage-backend-based-on-websockets",target:"_blank",rel:"noopener noreferrer"}},[t._v("High volume storage backends for WS?"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://stackoverflow.com/questions/57945868/djangorest-vs-expressjs-which-1-should-i-choose-to-build-rest-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("Express vs Django?"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://stackoverflow.com/questions/60152922/proper-way-of-using-react-hooks-websockets",target:"_blank",rel:"noopener noreferrer"}},[t._v("web socket client using react hooks"),e("OutboundLink")],1)])]),t._v(" "),e("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/khULSvz_hdE",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}}),t._v(" "),e("Footer")],1)}),[],!1,null,null,null);s.default=n.exports}}]);