(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{715:function(e,t,a){"use strict";a.r(t);var s=a(7),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"kubernetes-cluster"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-cluster"}},[e._v("#")]),e._v(" Kubernetes Cluster")]),e._v(" "),a("h2",{attrs:{id:"local-k8-cluster-players"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-k8-cluster-players"}},[e._v("#")]),e._v(" Local K8 Cluster players")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://minikube.sigs.k8s.io/docs/start/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Minikube"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://kind.sigs.k8s.io/docs/user/quick-start/#installation",target:"_blank",rel:"noopener noreferrer"}},[e._v("kind"),a("OutboundLink")],1),e._v(" (k8 in docker)\n"),a("ol",[a("li",[e._v("docker is running inside docker")])])]),e._v(" "),a("li",[e._v("k3s (pipelines to run integration tests) make sure everything works")])]),e._v(" "),a("h2",{attrs:{id:"minikube"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#minikube"}},[e._v("#")]),e._v(" Minikube")]),e._v(" "),a("p",[e._v("setup a VM, as in real cluster\nreally fully featured")]),e._v(" "),a("ul",[a("li",[e._v("Master Nodes and Worker Nodes have different responsibilities")]),e._v(" "),a("li",[e._v("How do I create pods and services on k8 cluster?")])]),e._v(" "),a("p",[e._v("How to maintain open source project?")]),e._v(" "),a("p",[e._v("Can have multiple clusters with different container runtimes (like docker, containerd, CRI-O)")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://minikube.sigs.k8s.io/docs/tutorials/setup_minikube_in_github_actions/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Can run minikube in github actions CI"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Install minikube on a remote machine")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("minikube start --driver=ssh --ssh-ip-address=vm.example.com --force-systemd=true --cpus 6 --memory 8000 --profile=avi-cluster\nminikube stop --schedule=5m\n")])])]),a("ul",[a("li",[e._v("can use minikube to build images without having to install docker at all")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("minikube image build -t \n")])])]),a("p",[e._v("Embrace the human parts of software")]),e._v(" "),a("h3",{attrs:{id:"how-to-run-container-in-minikube"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-run-container-in-minikube"}},[e._v("#")]),e._v(" How to run container in minikube")]),e._v(" "),a("ul",[a("li",[e._v("We need to create a K8 "),a("strong",[e._v("deployment")]),e._v(" before we can run a container in cluster")]),e._v(" "),a("li",[e._v("Expose the port to the outside world")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl create deployment hello-node --image=gcr.io/hello-node\nkubectl get deployments\n\n# enable communication via Service component\nkubectl expose deployment hello-node --type=LoadBalancer --port=8080\nkubectl expose deployment hello-node --type=NodePort --port=8080 --name=servie-name\n\nkubectl get services\n\n# autoscale deployments\nkubectl autoscale deployment/nginx-deployment --min=10 --max=15 --cpu-percent=80\n\nminikube service hello-node   # expose service to outside world\n")])])]),a("h3",{attrs:{id:"config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[e._v("#")]),e._v(" Config")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("minikube start --container-runtime=docker\n")])])]),a("h2",{attrs:{id:"container-runtimes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#container-runtimes"}},[e._v("#")]),e._v(" Container Runtimes")]),e._v(" "),a("p",[e._v("Knows how to run and check the status of containers")]),e._v(" "),a("ul",{staticClass:"task-list"},[a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" build and add images to minikube local registry")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("eval $(minikube docker-env)\n\nminikube addons enable registry\ndocker build --tag $(minikube ip):5000/test-img .\ndocker push $(minikube ip):5000/test-img\n\nminikube image build -t my_image .\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("minikube mount $HOME:/host\n")])])]),a("h2",{attrs:{id:"api-throttling-and-rate-limits"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-throttling-and-rate-limits"}},[e._v("#")]),e._v(" API Throttling and rate limits")]),e._v(" "),a("p",[e._v("using nginx ingress "),a("code",[e._v("minikube addons enable ingress")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://medium.com/titansoft-engineering/rate-limiting-for-your-kubernetes-applications-with-nginx-ingress-2e32721f7f57",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://medium.com/titansoft-engineering/rate-limiting-for-your-kubernetes-applications-with-nginx-ingress-2e32721f7f57"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("nginx uses "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Leaky_bucket",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://en.wikipedia.org/wiki/Leaky_bucket"),a("OutboundLink")],1),e._v(" Algorithm")]),e._v(" "),a("p",[e._v("An Ingress may be configured to give")]),e._v(" "),a("ul",{staticClass:"task-list"},[a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" Services externally-reachable URLs")]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" load balance traffic")]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" terminate SSL / TLS, and")]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" offer name-based virtual hosting.")])]),e._v(" "),a("h3",{attrs:{id:"how-to-expose-a-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-expose-a-service"}},[e._v("#")]),e._v(" How to expose a Service ?")]),e._v(" "),a("p",[e._v("How external traffic enters K8 clusters")]),e._v(" "),a("ol",[a("li",[e._v("NodePort")]),e._v(" "),a("li",[e._v("LoadBalancer")]),e._v(" "),a("li",[e._v("Ingress Controller")])]),e._v(" "),a("h4",{attrs:{id:"api-management-platform"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-management-platform"}},[e._v("#")]),e._v(" API Management platform")]),e._v(" "),a("p",[e._v("for use in the API Economy.\n"),a("a",{attrs:{href:"https://www.ibm.com/docs/en/api-connect/10.0.x?topic=api-connect-overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBM API Connect"),a("OutboundLink")],1),e._v(" enables users to create, assemble, manage, secure and socialize web application programming interfaces (APIs).")]),e._v(" "),a("h2",{attrs:{id:"aws-sam-vs-k8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-sam-vs-k8"}},[e._v("#")]),e._v(" AWS SAM vs K8")]),e._v(" "),a("p",[e._v("container driven development and deployment with SAM")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://aws.amazon.com/blogs/compute/using-container-image-support-for-aws-lambda-with-aws-sam/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://aws.amazon.com/blogs/compute/using-container-image-support-for-aws-lambda-with-aws-sam/"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"modern-serverless-development"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modern-serverless-development"}},[e._v("#")]),e._v(" Modern Serverless Development")]),e._v(" "),a("ul",[a("li",[e._v("Kubernetes - can move deployment to any cloud provider like AWS, GCP, Azure, IMB cloud etc. cloud provider agnostic")]),e._v(" "),a("li",[e._v("Containers Runtime Engine")]),e._v(" "),a("li",[e._v("Lambda Functions with API Gateways")])]),e._v(" "),a("h2",{attrs:{id:"eks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eks"}},[e._v("#")]),e._v(" EKS")]),e._v(" "),a("ul",{staticClass:"task-list"},[a("li",[a("p",[e._v("Managed Master Node (preinstalled)")]),e._v(" "),a("ul",[a("li",[e._v("Container runtine")]),e._v(" "),a("li",[e._v("K8 Master processes, APIs")])])]),e._v(" "),a("li",[a("p",[e._v("Worker Nodes -> EC2 instances, Node Groups")]),e._v(" "),a("ul",[a("li",[e._v("Application software")])])]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("p",[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox",checked:"true"}}),e._v(" scale applications")])]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("p",[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" route and throttle traffic")])]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("p",[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" manage container lifecycle, restarting stale/dead containers")])]),e._v(" "),a("li",{staticClass:"task-list-item"},[a("p",[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox"}}),e._v(" high availability and six-9 SLAs")])])]),e._v(" "),a("h2",{attrs:{id:"kubernetes-components"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-components"}},[e._v("#")]),e._v(" KUBERNETES Components")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://etcd.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("etcd"),a("OutboundLink")],1),e._v(" open source KV data-store, single source of truth, reliably and consistent.\n"),a("ul",[a("li",[e._v("built on top of RAFT Algorithm")])])]),e._v(" "),a("li",[e._v("nodes: physical machine with CPU and memory and networking resources")]),e._v(" "),a("li",[e._v("pods, logical abstraction of containers, so that you can change container technology")]),e._v(" "),a("li",[e._v("deployments - run the containers inside pods, and replicas for stateless applications")]),e._v(" "),a("li",[e._v("ingress, external service")]),e._v(" "),a("li",[e._v("service, permanent IP address for communication")]),e._v(" "),a("li",[e._v("COnfigMap - external configuration to your application, like database connection URL")]),e._v(" "),a("li",[e._v("secret, like config maps but NOT in plain text (base64)")]),e._v(" "),a("li",[e._v("Volumes, attach persistant data-storage to pods, could be local or remote")]),e._v(" "),a("li",[e._v("StatefulSet, for database components replicas like postgresSQL")])]),e._v(" "),a("h2",{attrs:{id:"multi-cluster-kubernetes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#multi-cluster-kubernetes"}},[e._v("#")]),e._v(" Multi cluster Kubernetes")]),e._v(" "),a("ul",[a("li",[e._v("K8 abstraction for Tenants = Namespace")]),e._v(" "),a("li",[e._v("draw K8 clluster boundaries with your tenants")])]),e._v(" "),a("p",[e._v('Software multitenancy is a software architecture in which a single instance of software runs on a server and serves multiple tenants. Systems designed in such manner are "shared" (rather than "dedicated" or "isolated"). A tenant is a group of users who share a common access with specific privileges to the software instance.')]),e._v(" "),a("ul",[a("li",[e._v("s/w is shared between multiple consumes")]),e._v(" "),a("li",[e._v("BUT consumers are unaware of each other.")]),e._v(" "),a("li",[e._v("Eg; SaaS Appls, API consumers")])]),e._v(" "),a("p",[e._v("Tenancy at multiple softwares levles, like")]),e._v(" "),a("ol",[a("li",[e._v("Infrastructure Level")]),e._v(" "),a("li",[e._v("Schema based Multitenancy model")]),e._v(" "),a("li",[e._v("Shared Schema Multitenancy model")])]),e._v(" "),a("p",[e._v("Shared Multitenancy Services like")]),e._v(" "),a("ol",[a("li",[e._v("Computing, CPU, Memory")]),e._v(" "),a("li",[e._v("Networking")]),e._v(" "),a("li",[e._v("Storage")])])])}),[],!1,null,null,null);t.default=i.exports}}]);