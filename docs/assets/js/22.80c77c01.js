(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{536:function(t,e,s){t.exports=s.p+"assets/img/mocking_fn_properties.157442e7.png"},643:function(t,e,s){"use strict";s.r(e);var a=s(7),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"javascript-testing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-testing"}},[t._v("#")]),t._v(" ✅ Javascript Testing")]),t._v(" "),a("TagLinks"),t._v(" "),a("article",{staticClass:"quote"},[a("div",{staticClass:"body"},[a("p",[t._v("Tests are lifeline for your code. A dirty code could always be refactored, but a broken code could not.")])]),a("footer",{staticClass:"author"},[t._v("~ Sarah Dayan")])]),a("ul",[a("li",[t._v("Mocking "),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.186ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"1.76ex",height:"1.505ex",viewBox:"0 -583 778 665"}},[a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"matrix(1 0 0 -1 0 0)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"mo"}},[a("path",{attrs:{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"}})])])])])]),t._v(" Object faking")],1),t._v(" "),a("li",[a("mark",[t._v("Test Stubs")]),t._v(" are mocks that helps you test. "),a("Badge",{attrs:{type:"tip",vertical:"middle",text:"For Example,"}}),t._v(" interface for "),a("code",[t._v("sendEmail")])],1),t._v(" "),a("li",[a("mark",[t._v("mock objects")]),t._v(" are objects where you actually put asserts on test to determine test pass/fail status. "),a("Badge",{attrs:{type:"tip",vertical:"middle",text:"For Example,"}}),t._v(" test if "),a("code",[t._v("sendEmail")]),t._v(" service wrote a success/failure log. We will mock "),a("code",[t._v("logWriter")]),t._v(" in this scenario.")],1),t._v(" "),a("li",[t._v("TDD forces you to think about writing testable code under various conditions")])]),t._v(" "),a("h2",{attrs:{id:"why-mocking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-mocking"}},[t._v("#")]),t._v(" 🐒 Why Mocking")]),t._v(" "),a("ul",[a("li",[t._v("Goal of mocking to avoid using any "),a("mark",[t._v("external service")]),t._v(". Why would we want to do that?\n"),a("ul",[a("li",[t._v("to make tests run faster")]),t._v(" "),a("li",[t._v("to make tests more isolated")]),t._v(" "),a("li",[t._v("to make tests more independent and idempotent of each other")]),t._v(" "),a("li",[t._v("great for writing "),a("strong",[t._v("unittests")])])])]),t._v(" "),a("li",[t._v("If our tests depends on some external service, then we might better call it "),a("strong",[t._v("integration test")])]),t._v(" "),a("li",[t._v("Great of simulating scenarious like\n"),a("ul",[a("li",[t._v("What if database is empty?")]),t._v(" "),a("li",[t._v("what if databse is full?")]),t._v(" "),a("li",[t._v("what if delays are "),a("mjx-container",{staticClass:"MathJax",attrs:{jax:"SVG"}},[a("svg",{staticStyle:{"vertical-align":"-0.09ex"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"3.52ex",height:"1.597ex",viewBox:"0 -666 1555.8 706"}},[a("g",{attrs:{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"matrix(1 0 0 -1 0 0)"}},[a("g",{attrs:{"data-mml-node":"math"}},[a("g",{attrs:{"data-mml-node":"mo"}},[a("path",{attrs:{"data-c":"3E",d:"M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"}})]),a("g",{attrs:{"data-mml-node":"mn",transform:"translate(1055.8, 0)"}},[a("path",{attrs:{"data-c":"35",d:"M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"}})])])])])]),t._v(" sec?\n*what if network is super slow? Or no network at all situation.")],1)])])]),t._v(" "),a("h2",{attrs:{id:"mock-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mock-object"}},[t._v("#")]),t._v(" 🎎 Mock Object")]),t._v(" "),a("ul",[a("li",[t._v("Track function calls, #instances created, results returned etc.")]),t._v(" "),a("li",[t._v("Erase the actual implementation of a function")]),t._v(" "),a("li",[t._v("what to assert on? values?\n"),a("ul",[a("li",[a("code",[t._v("expect(value).toMatchSnapshot()")])])])])]),t._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"jest mocking function mock property","data-src":s(536),loading:"lazy"}})]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" car "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'some cat'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("car"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** REVIEW\n *\n * The jest object is automatically in scope within every test file.\n * The methods in the jest object help create mocks.\n * imported explicitly by via\n * import {jest} from '@jest/globals'.\n *\n * NOTE -> MOCKING aka Spying\n * 1. How the method was called\n * 2. What were the responses to each call\n *\n * https://jestjs.io/docs/en/mock-function-api#methods\n * https://jestjs.io/docs/en/jest-object#mock-functions\n * https://stackoverflow.com/questions/2665812/what-is-mocking\n *\n * How to create mock objects/functions?\n * 1. jest.fn(implementation)\n * 2. jest.spyOn(object, methodName)\n *\n * How to create test stubs? Indirections?\n * https://jestjs.io/docs/en/manual-mocks#mocking-user-modules\n *\n * NOTE -> Parameterized and concurrent tests\n * test.only\n * test.each(table)(name, fn, timeout)\n * test.todo(name)\n */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// beforeAll(SuiteSetup, timeout)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// beforeEach(TestSetup, timeout)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// afterEach(TestTeardown, timeout)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// afterAll(SuiteTeardown, timeout)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sumFn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dummy test suite'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'both integer argumants'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Mock sumFn Functionality")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mockFn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mockFn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// expect(actual).toBe(6)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])])]),a("h2",{attrs:{id:"timer-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timer-functions"}},[t._v("#")]),t._v(" ⏲ Timer Functions")]),t._v(" "),a("p",[t._v("The native timer functions (i.e., "),a("code",[t._v("setTimeout")]),t._v(", "),a("code",[t._v("setInterval")]),t._v(", "),a("code",[t._v("clearTimeout")]),t._v(", "),a("code",[t._v("clearInterval")]),t._v(")\nare less than ideal for a testing environment since they "),a("mark",[t._v("depend on real time to elapse.")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("jest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useFakeTimers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Fast-forward until all timers have been executed")]),t._v("\njest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("advanceTimersByTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearAllTimers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("p",[t._v("Enable fake timers by calling "),a("code",[t._v("jest.useFakeTimers();")]),t._v(".\nThis mocks out "),a("code",[t._v("setTimeout")]),t._v(" and other timer functions with mock functions.\nIf running multiple tests inside of one file or describe block, jest.useFakeTimers();\ncan be called before each test manually or with a setup function such as "),a("code",[t._v("beforeEach")]),t._v(".")]),t._v(" "),a("ul",[a("li",[t._v("Callback is called after 1 second?")])]),t._v(" "),a("h2",{attrs:{id:"good-questions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#good-questions"}},[t._v("#")]),t._v(" 🌧 Good Questions")]),t._v(" "),a("dl",[a("dt",[t._v("What should I test in a component?")]),t._v(" "),a("dd",[a("p",[t._v("what/how to test.")]),t._v(" "),a("ol",{staticClass:"task-list"},[a("li",[t._v("HTML structure?")]),t._v(" "),a("li",[t._v("CSS classes?")]),t._v(" "),a("li",[t._v("View logic?")]),t._v(" "),a("li",[t._v("Event Handlers?")]),t._v(" "),a("li",[t._v("Lifecycle hooks?")]),t._v(" "),a("li",[t._v("Methods, computed properties?")]),t._v(" "),a("li",[t._v("Am I going for 100% coverage?")]),t._v(" "),a("li",[t._v("Unit | Integration | e2e test?")]),t._v(" "),a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"markdown-todo",attrs:{disabled:"true",type:"checkbox",checked:"true"}}),t._v(" Use testing stub boilerplates snippets. saves time")])])]),t._v(" "),a("dt",[t._v("What is the difference "),a("a",{attrs:{href:"https://stackoverflow.com/questions/57643808/what-is-the-difference-between-jest-fn-and-jest-spyon-methods-in-jest",target:"_blank",rel:"noopener noreferrer"}},[t._v("b/w jest.fn() and jest.spyOn()?"),a("OutboundLink")],1)]),t._v(" "),a("dd",[a("p",[t._v("They both does the same job but in different ways.")]),t._v(" "),a("p",[a("code",[t._v("spyOn")]),t._v(" - lets us create a mock from and existing class/method which we want to use in our test")]),t._v(" "),a("p",[a("code",[t._v("jest.fn()")]),t._v(" - lets us create mock object from scratch. Usually we just plug in the return values without\ncaring about the implementation.")])]),t._v(" "),a("dt",[t._v("Difference between "),a("code",[t._v("jest.fn()")]),t._v(" and "),a("code",[t._v("jest.mock()")]),t._v("?")]),t._v(" "),a("dd",[a("table",[a("thead",[a("tr",[a("th",[t._v("jest")]),t._v(" "),a("th",[t._v("description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://jestjs.io/docs/en/jest-object#jestfnimplementation",target:"_blank",rel:"noopener noreferrer"}},[t._v("jest.fn()"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("mocks objects and functions")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://jestjs.io/docs/en/jest-object#jestmockmodulename-factory-options",target:"_blank",rel:"noopener noreferrer"}},[t._v("jest.mock()"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("mocks a module")])])])])]),t._v(" "),a("dt",[t._v("How to mock JSON imports?")]),t._v(" "),a("dd",[a("p",[t._v("Use "),a("a",{attrs:{href:"https://jestjs.io/docs/en/configuration#modulenamemapper-objectstring-string--arraystring",target:"_blank",rel:"noopener noreferrer"}},[t._v("moduleNameMapper"),a("OutboundLink")],1),t._v("\nin settings to mock a json file import.")])])]),t._v(" "),a("h2",{attrs:{id:"resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://lmiller1990.github.io/vue-testing-handbook/reducing-boilerplate-in-tests.html#reducing-boilerplate-in-tests",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://lmiller1990.github.io/vue-testing-handbook/reducing-boilerplate-in-tests.html#reducing-boilerplate-in-tests"),a("OutboundLink")],1)]),t._v(" "),a("li")]),t._v(" "),a("Footer")],1)}),[],!1,null,null,null);e.default=n.exports}}]);